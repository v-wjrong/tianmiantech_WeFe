# Basic Information

|      |      |
|------|------|
| Name | java |
| Language | .java |
| Code Path | WeFe/common/java |
| Package Name | docs.common.java |
| Brief Description | Java basic utility library, including configuration management, data processing, validation, HTTP communication, etc., with dependencies such as Log4j. Full-stack web application solution, supporting API management, access control, logging, with dependencies such as Spring. JPA data access layer, providing CRUD and dynamic queries, dependent on JPA. Cross-cloud data storage, supporting sharding and connection pool management, dependent on Druid. Protobuf protocol, supporting data serialization. MongoDB data management, supporting CRUD and aggregation queries. Federated learning framework, including health checks, configuration management, etc. CAPTCHA service, supporting SMS/email delivery. Cryptography toolkit, supporting key management and certificate operations. JDBC framework, supporting multi-database operations. |

# Description

## Overview  
This module serves as the full-stack infrastructure for the federated learning platform, with core responsibilities including data governance (multi-database CRUD/dynamic queries), secure communication (national cryptographic algorithms/certificate management), and development support (configuration management/captcha services). The interface specification follows a layered design, such as the AbstractApi base class system, JdbcScanner abstract queries, and factory patterns (ClientFactory). Key data structures encompass pagination objects (Pageable), certificate models (CryptoKeyPair), condition builders (Where), and captcha enums (CaptchaSendChannel). External dependencies include the Spring framework, BouncyCastle, MongoDB drivers, and cloud platform SDKs, such as Log4j for logging and Alibaba Cloud SMS SDK for captcha delivery.  

The module adopts a multi-mode integration design, resembling a middleware collection. For example, Configurations manages multi-environment settings, JdbcClient standardizes JDBC operations, and CertService handles certificate issuance. Technical features include annotation-driven approaches (@FlowLimitByMobile), strategy enums (ServiceType), and stream processing (BatchConsumer). Typical implementations involve SM2 key generation → PEM-formatted storage or dynamic query construction via Where.equal().groupBy().  

## Core Business Scenarios  
The module supports three key closed loops: 1) **Security loop**, involving captcha services (SMS/email) → certificate management (SM2 signatures) → HTTPS communication, such as SMS verification during user registration; 2) **Data loop**, combining JdbcScanner streaming queries → MongoDB aggregation → paginated storage, akin to an ETL pipeline; 3) **Service loop**, spanning health checks (UnionService detection) → API execution (reflective invocation) → audit logging.  

The unified interaction model combines chained calls with factory patterns. For instance, the Where builder generates dynamic SQL conditions, while ClientFactory selects captcha clients by channel. Functional completeness is reflected in coverage of national cryptographic algorithms (SM3WITHSM2), multi-database support (MySQL/MongoDB), and full lifecycle management (e.g., certificate states WAIT_VERIFY→VALID). Typical applications include federated learning task configuration (resource selectors), high-concurrency data sharding (PageInputModel), and cross-cloud storage switching (OSS credential management). Examples include HttpRequest auto-handling 302 redirects and Validator verifying ID card formats.


### Package Internal Structure View

None

# File List

| Name   | Type  | Description |
|-------|------|-------------|
| [common-data-mysql](common-data-mysql/src/main/java/com/_module.md) | module | MyJpaRepository provides default methods for pagination queries and string processing. PageUtils handles pagination for single objects. The OrderBy enum defines sorting directions. CurdException is a custom exception. The entity class inheritance hierarchy manages common fields. The SQL monitoring module captures slow SQL and errors. The abstract JPA configuration class creates the entity manager factory and data source. MySpecification implements dynamic query condition construction. DataMysql is the base class for database operations. The Where class builds query conditions in a chainable manner. |
| [common-jdbc](common-jdbc/src/main/java/com/_module.md) | module | HiveScanner and MysqlScanner are subclasses of JdbcScanner, designed for Hive and MySQL queries respectively. JdbcScanner is an abstract base class that encapsulates the JDBC query process and supports multi-database adaptation. JdbcClient encapsulates JDBC operations, supports various databases, and provides connection management, batch writing, and streaming query functionalities. |
| [common-proto](common-proto/src/main/java/com/_module.md) | module | This is a Google Protocol Buffers (protobuf) definition file describing a protocol for intermediate data structures. It primarily includes three message types: IntermediateDataItem (key-value pair data item), BatchSerializationData (batch serialized data), and IntermediateData (intermediate data container). IntermediateData supports two storage methods: 1) a collection of multiple key-value pair data items; 2) binary data after complete serialization. The file defines the data structures and related operational methods for data exchange between different systems. |
| [common-cert](common-cert/src/main/java/com/_module.md) | module | Cryptography toolkit, including key management, certificate operations, and file processing. Supports RSA/ECDSA/SM2 algorithms, PFX/JKS parsing, and relies on BouncyCastle. Suitable for full-cycle PKI management, such as key generation, certificate issuance, and storage. Includes static utility classes like KeyUtils and CertUtils. |
| [common-verification-code](common-verification-code/src/main/java/com/_module.md) | module | Alibaba Cloud SMS Service Java client encapsulates the SDK to provide SMS sending functionality, supporting verification code scenarios, and depends on the Alibaba Cloud SDK. The email sending module encapsulates the SMTP protocol, supports HTML emails and SSL encryption, and relies on JavaMail. The verification code management module defines business types and sending channel enumerations with no external dependencies. The abstract verification code service class provides generation, sending, and validation functions with a 2-minute validity period. The factory class returns SMS or email client instances based on the channel. Abstract client and response classes provide basic encapsulation, requiring subclasses to implement specific logic. |
| [common-wefe](common-wefe/src/main/java/com/_module.md) | module | The service inspection framework implements hierarchical health checks, the enumeration module defines federated learning type states, the configuration management module uniformly handles multi-source connections, and the data type inferrer analyzes field types. |
| [common-data-mongodb](common-data-mongodb/src/main/java/com/_module.md) | module | The MongoDB data access layer provides CRUD and complex query capabilities, supporting logical deletion and timestamp constraints. It includes SMS business classification and vendor enumeration management. The toolkit supports chained query construction and aggregation operations. The federated learning platform implements logging, certificates, and data governance. Unified query management handles datasets and member authentication. The connection management module dynamically registers MongoDB components. |
| [common-data-storage](common-data-storage/src/main/java/com/_module.md) | module | DruidAbstractDataSource is the core abstract class of the Druid connection pool, providing fundamental functionalities such as connection pool configuration, monitoring, and thread safety. The multi-cloud storage module supports unified operations across heterogeneous databases, including capabilities like sharding, pagination, and stream processing, and relies on mainstream cloud SDKs and JDBC drivers. |
| [common-web](common-web/src/main/java/com/_module.md) | module | This module integrates a Web API development framework, encompassing core functionalities such as logging, user activity management, permission control, traffic limiting, CAPTCHA services, and documentation generation. It adopts an annotation-driven approach and reflection mechanism, supporting multi-format document output and automated validation. With thread-safe design and defensive programming to ensure stability, it is suitable for multi-role systems and microservices scenarios. |
| [common-lang](common-lang/src/main/java/com/_module.md) | module | Java Configuration Management Toolset: Unifies configuration management and provides type-safe interfaces. Supports multi-environment configuration loading and type conversion, dependent on Log4j. The data processing toolset includes Excel parsing and batch text processing, supporting ETL and log analysis. The field validation platform implements sensitive data masking and format validation. The basic constants module defines key types and compression formats. The general utility library covers encryption, collection operations, and more. The HTTP communication module manages file downloads and request handling. The compression/decompression module supports multi-format processing. Functional interfaces support Lambda operations. The thread pool management tool provides task execution capabilities. Validation classes check data type legality. Status code enumerations define system error codes. Security tools generate random salt values. The time interval class handles time calculations. The batch consumer class implements batch data processing. The captcha generation class creates Base64 captchas. The information size class converts storage units. The data type conversion class handles multi-format conversions. The sampling log class controls log frequency. The timing utility class records code execution time. |


